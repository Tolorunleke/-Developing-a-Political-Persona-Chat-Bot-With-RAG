!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d88efb9c-5d00-49c4-a6a5-c9c08231967b",e._sentryDebugIdIdentifier="sentry-dbid-d88efb9c-5d00-49c4-a6a5-c9c08231967b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"ec620cc2bf7baa14e8fc55ad8e90f5c93d44b0e2"},(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{c3jk:function(e,t,n){"use strict";n.r(t);var r,o=n("gcR/"),i=n.n(o),c=n("J4zp"),a=n.n(c),u=n("q1tI"),l=n.n(u),s=n("Gs79"),d=n("pCca"),f=n("NQ6n"),b=n("2PZ4"),g=n("U6jc"),v=n("Jqp9"),p=n("hKI/"),O=n.n(p),h=n("PgO9"),m=n("KG2r"),w=n("X6oL"),E=n("Ck0P"),j=n("taqW"),y=n("HUmG"),T=n("+g8y"),k=n("3sMT"),_=n("wXC7"),A=n.n(_),I=Object(v.css)("position:fixed;z-index:",A.a.zIndex.sectionOverlay-1,";right:20px;bottom:20px;opacity:1;transition:bottom 0.2s ease,opacity 0.1s linear;overflow:visible;"),N=function(e){var t=e.dockHeight;return Object(v.css)("bottom:",t+20,"px;")},R=Object(v.css)("opacity:0;visibility:hidden;"),x=Object(v.css)("border-radius:50%;border:1px solid ",k.color.stroke.quaternary,";background-color:rgba(255,255,255);position:static;display:block;cursor:pointer;"),C=Object(v.css)("border:1px solid ",k.dark.colors.content.primary.hex,";backdrop-filter:blur(10px);background:rgba(0,0,0,0.24);svg > path{fill:",k.dark.colors.stroke.primary.hex,";}"),S=0,B=1,M=2;function G(e){var t,n,o,c,p,k=e.asset,_=Object(w.useTracking)().trackEvent,A=Object(h.a)().user,G=Object(y.f)(A)&&Object(y.d)(A),H=Object(u.useRef)(!1),L=Object(u.useState)(!1),Y=a()(L,2),D=Y[0],q=Y[1],z=Object(u.useState)(!1),J=a()(z,2),P=J[0],W=J[1],F=Object(u.useState)(!0),K=a()(F,2),U=K[0],X=K[1],Q=Object(u.useState)(!1),Z=a()(Q,2),V=Z[0],$=Z[1],ee=Object(u.useState)(!1),te=a()(ee,2),ne=te[0],re=te[1],oe=Object(u.useRef)(null),ie=Object(s.a)().overlays,ce=Object(d.a)().deviceType,ae=Object(u.useState)(0),ue=a()(ae,2),le=ue[0],se=ue[1],de=Object(u.useState)((null===(t=window)||void 0===t?void 0:t.NYT_ACTION_BAR_THEME)||{}),fe=a()(de,2),be=fe[0],ge=fe[1],ve=Object(u.useRef)(),pe=Object(u.useRef)(new Set([])),Oe=Object(u.useRef)(new Set([])),he=Object(u.useRef)(new Set([])),me=Object(u.useRef)(null),we=Object(u.useRef)(null),Ee=Object(u.useState)(S),je=a()(Ee,2),ye=je[0],Te=je[1],ke=(null==be?void 0:be.disableTest)||(null==be?void 0:be.disableFloating),_e=k.uri.startsWith("nyt://interactive"),Ae=function(e){var t;null!=e&&e.detail&&!Number.isNaN(null===(t=e.detail)||void 0===t?void 0:t.dockHeight)&&se(e.detail.dockHeight)},Ie=function(e){e.forEach((function(e){e.isIntersecting?(pe.current.add(e.target),Oe.current.add(e.boundingClientRect)):e.isIntersecting||pe.current.delete(e.target)}))},Ne=function(){window.NYT_ACTION_BAR_THEME&&ge(window.NYT_ACTION_BAR_THEME)};Object(u.useEffect)((function(){if(ke)return function(){};var e=[];ve.current=new IntersectionObserver(Ie);var t=O()((function(){if(pe.current.size>0){var e=[],t=new IntersectionObserver((function(t,n){if(t.forEach((function(t){e.push(t.boundingClientRect)})),me.current){var r=me.current.getBoundingClientRect();if(0===r.width&&0===r.height||(we.current=r),0===we.current.width||0===we.current.height)return;var o={top:we.current.top-20,bottom:we.current.bottom+20,left:we.current.left,right:we.current.right},i=!1;e.forEach((function(e){var t,n;t=o,(n=e).left>=t.right||n.right<=t.left||n.top>=t.bottom||n.bottom<=t.top||(i=!0)})),W(i),q(i)}n.disconnect()}));pe.current.forEach((function(e){t.observe(e)}))}else W(!1)}),100);return document.addEventListener("scroll",t),Object(g.handleAdDefined)("all",(function(t){e.push(document.getElementById(t.id)),e.forEach((function(e){ve.current.observe(e)}))})),Ne(),window.addEventListener("dockInfo",Ae),_e&&window.addEventListener("NYT_ACTION_BAR_THEME",Ne),function(){document.removeEventListener("scroll",t),window.removeEventListener("dockInfo",Ae),_e&&window.removeEventListener("NYT_ACTION_BAR_THEME",Ne)}}),[ke,_e]),Object(u.useEffect)((function(){if(ke)return function(){};var e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?(he.current.add(e.target),$(!0)):he.current.delete(e.target)})),he.current.size>0?(X(!0),q(!0),clearTimeout(oe.current),oe.current=setTimeout((function(){q(!1)}),100)):X(!1)}),{});return document.querySelectorAll('#standalone-footer, #interactive-standalone-sharetools, [data-testid="share-tools"], #NYT_BELOW_MAIN_CONTENT_REGION, #bottom-sheet-sensor, #site-index, #story h1, #story #article-summary').forEach((function(t){e.observe(t)})),function(){e.disconnect()}}),[ke,V]);var Re=!(!P&&!U&&V);if(Object(u.useEffect)((function(){Re||!1!==H.current||ke||(_({event:"impression",module:{region:"floating-button",name:"share-tools"}}),H.current=!0)}),[Re,_,ke]),ke)return null;if(null!=ie&&null!==(n=ie.bottomsheet)&&void 0!==n&&n.visible||(null!=ie&&null!==(o=ie.onetap)&&void 0!==o&&o.visible||null!=ie&&null!==(c=ie.extendedAccess)&&void 0!==c&&c.visible)&&"smartphone"===ce)return null;var xe=function(e){e&&(Te(B),setTimeout((function(){Te(M)}),200))},Ce=null;ye===S?Ce=i()(m.b,{share:k,pageType:"Article",toggleGiftArticleMenu:xe,trackingRegion:"floating-button",renderGiftButton:G}):ye===B?Ce=r||(r=i()(j.a,{fixed:!1})):ye===M&&(Ce=i()(E.a,{share:k,pageType:"Article",trackingRegion:"floating-button",renderGiftButton:!0,toggleGiftArticleMenu:xe}));var Se=G&&ye===S;return l.a.createElement("div",{className:Object(v.cx)(I,le?N({dockHeight:le}):null,Re?R:null),ref:me,"data-testid":"floating-button"},i()(f.b,{buttonContent:i()(b.b,{className:Object(v.cx)(T.i,T.c)}),pageType:"Article",share:k,handleOpen:function(e){e?(re(e),e&&ne!==e&&_({event:"moduleInteraction",eventData:{pagetype:"Article",trigger:"module",type:"click"},module:{name:"share-tools",region:"floating-button",element:{name:"tools-menu",label:"Tools Menu",url:k.url}}}),!1===e&&Te(S)):re(e)},toggleGiftArticleMenu:xe,forceCloseModal:D,className:Object(v.cx)(x,null!=be&&null!==(p=be.actionBarTheme)&&void 0!==p&&p.includes("dark")?C:null),hasGiftArticleButtonSibling:Se,trackingRegion:"floating-button",modalContent:Ce}))}G.displayName="FABActual";t.default=G}}]);
//# sourceMappingURL=fabActual-85c7f0133b8967418dbe.js.map